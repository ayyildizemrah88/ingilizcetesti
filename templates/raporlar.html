{% extends "base.html" %}
{% block title %}Raporlar - Skills Test Center{% endblock %}
{% block content %}
<div class="page-container">
    <div class="page-header">
        <h4><span class="material-symbols-outlined">assessment</span> Raporlar</h4>
        <div class="header-actions">
            <a href="{{ url_for('admin.export_data') }}" class="btn btn-outline-primary">
                <span class="material-symbols-outlined">download</span> CSV İndir
            </a>
        </div>
    </div>
    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <span class="material-symbols-outlined text-primary">group</span>
            <div>
                <h3>{{ stats.total or 0 }}</h3>
                <p>Toplam Aday</p>
            </div>
        </div>
        <div class="stat-card">
            <span class="material-symbols-outlined text-success">check_circle</span>
            <div>
                <h3>{{ stats.completed or 0 }}</h3>
                <p>Tamamlanan</p>
            </div>
        </div>
        <div class="stat-card">
            <span class="material-symbols-outlined text-warning">pending</span>
            <div>
                <h3>{{ stats.pending or 0 }}</h3>
                <p>Bekleyen</p>
            </div>
        </div>
        <div class="stat-card">
            <span class="material-symbols-outlined text-info">play_circle</span>
            <div>
                <h3>{{ stats.in_progress or 0 }}</h3>
                <p>Devam Eden</p>
            </div>
        </div>
    </div>
    <!-- Performance Stats -->
    <div class="card">
        <h5><span class="material-symbols-outlined">insights</span> Performans Özeti</h5>
        <div class="performance-grid">
            <div class="perf-item">
                <div class="perf-value">{{ stats.average_score or 0 }}</div>
                <div class="perf-label">Ortalama Puan</div>
                <div class="perf-bar">
                    <div class="perf-fill" style="width: {{ stats.average_score or 0 }}%"></div>
                </div>
            </div>
            <div class="perf-item">
                <div class="perf-value">%{{ stats.pass_rate or 0 }}</div>
                <div class="perf-label">Başarı Oranı</div>
                <div class="perf-bar">
                    <div class="perf-fill success" style="width: {{ stats.pass_rate or 0 }}%"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- CEFR Distribution -->
    <div class="card">
        <h5><span class="material-symbols-outlined">bar_chart</span> CEFR Seviye Dağılımı</h5>
        <div class="cefr-grid">
            <div class="cefr-item">
                <div class="cefr-level">A1</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 10%"></div>
                </div>
            </div>
            <div class="cefr-item">
                <div class="cefr-level">A2</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 15%"></div>
                </div>
            </div>
            <div class="cefr-item">
                <div class="cefr-level">B1</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 30%"></div>
                </div>
            </div>
            <div class="cefr-item">
                <div class="cefr-level">B2</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 25%"></div>
                </div>
            </div>
            <div class="cefr-item">
                <div class="cefr-level">C1</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 15%"></div>
                </div>
            </div>
            <div class="cefr-item">
                <div class="cefr-level">C2</div>
                <div class="cefr-bar">
                    <div class="cefr-fill" style="width: 5%"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .page-container {
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .page-header h4 {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0;
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    .stat-card {
        background: white;
        border-radius: 16px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .stat-card .material-symbols-outlined {
        font-size: 40px;
    }
    .stat-card h3 {
        margin: 0;
        font-size: 2rem;
    }
    .stat-card p {
        margin: 0;
        color: #666;
    }
    .card {
        background: white;
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .card h5 {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .performance-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
    }
    .perf-item {
        text-align: center;
    }
    .perf-value {
        font-size: 2.5rem;
        font-weight: 700;
        color: #667eea;
    }
    .perf-label {
        color: #666;
        margin-bottom: 10px;
    }
    .perf-bar {
        height: 10px;
        background: #e0e0e0;
        border-radius: 5px;
        overflow: hidden;
    }
    .perf-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        border-radius: 5px;
    }
    .perf-fill.success {
        background: linear-gradient(90deg, #11998e, #38ef7d);
    }
    .cefr-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .cefr-item {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .cefr-level {
        font-weight: 700;
        width: 40px;
        color: #667eea;
    }
    .cefr-bar {
        flex: 1;
        height: 20px;
        background: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
    }
    .cefr-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        border-radius: 10px;
    }
</style>
{% endblock %}
