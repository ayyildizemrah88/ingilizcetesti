{% extends "dashboard.html" %}
{% block title %}Soru Analitiği - Skills Test Center{% endblock %}

{% block content %}
<div class="row">
    <!-- Header -->
    <div class="col-12 mb-4">
        <div class="d-flex justify-content-between align-items-center">
            <h2><i class="bi bi-question-circle me-2"></i>Soru Analitiği</h2>
            <div class="d-flex gap-2">
                <button class="btn btn-outline-primary" onclick="runCalibration()">
                    <i class="bi bi-cpu me-1"></i>Kalibrasyon Çalıştır
                </button>
                <a href="/admin/questions" class="btn btn-outline-secondary">
                    <i class="bi bi-list me-1"></i>Soru Listesi
                </a>
            </div>
        </div>
    </div>
    ... (HTML kısmı aynı) ...
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Difficulty Chart - DÜZELTİLMİŞ SATIR
    new Chart(document.getElementById('difficultyChart'), {
        type: 'bar',
        data: {
            labels: ['A1', 'A2', 'B1', 'B2', 'C1', 'C2'],
            datasets: [
                { label: 'Etiketli', data: {{ labeled_dist | tojson | safe }}, backgroundColor: '#667eea' },
                { label: 'Hesaplanan', data: {{ calculated_dist | tojson | safe }}, backgroundColor: '#ffc107' }
            ]
        },
        options: { responsive: true }
    });

    // Category Chart - DÜZELTİLMİŞ
    new Chart(document.getElementById('categoryChart'), {
        type: 'bar',
        data: {
            labels: {{ cat_names | tojson | safe }},
            datasets: [{
                label: 'Doğruluk %',
                data: {{ cat_accuracy | tojson | safe }},
                backgroundColor: '#28a745'
            }]
        },
        options: { scales: { y: { beginAtZero: true, max: 100 } } }
    });
    ... (diğer JavaScript aynı) ...
</script>
{% endblock %}
