{% extends "base.html" %}
{% block title %}Platform Raporu - Skills Test Center{% endblock %}
{% block content %}
<div class="page-container">
    <div class="page-header">
        <h4><span class="material-symbols-outlined">analytics</span> Platform Genel Raporu</h4>
    </div>
    <!-- Platform Stats -->
    <div class="stats-grid">
        <div class="stat-card purple">
            <span class="material-symbols-outlined">apartment</span>
            <div>
                <h3>{{ stats.total_companies or 0 }}</h3>
                <p>Toplam Şirket</p>
            </div>
        </div>
        <div class="stat-card blue">
            <span class="material-symbols-outlined">check_circle</span>
            <div>
                <h3>{{ stats.active_companies or 0 }}</h3>
                <p>Aktif Şirket</p>
            </div>
        </div>
        <div class="stat-card green">
            <span class="material-symbols-outlined">people</span>
            <div>
                <h3>{{ stats.total_users or 0 }}</h3>
                <p>Toplam Kullanıcı</p>
            </div>
        </div>
        <div class="stat-card orange">
            <span class="material-symbols-outlined">group</span>
            <div>
                <h3>{{ stats.total_candidates or 0 }}</h3>
                <p>Toplam Aday</p>
            </div>
        </div>
        <div class="stat-card cyan">
            <span class="material-symbols-outlined">task_alt</span>
            <div>
                <h3>{{ stats.completed_exams or 0 }}</h3>
                <p>Tamamlanan Sınav</p>
            </div>
        </div>
    </div>
    <!-- Companies Table -->
    <div class="card">
        <h5><span class="material-symbols-outlined">apartment</span> Şirket Bazlı Özet</h5>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Şirket</th>
                        <th>Durum</th>
                        <th>Kredi</th>
                        <th>Aday Sayısı</th>
                        <th>Tamamlanan</th>
                        <th>Ort. Puan</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sirket in companies %}
                    <tr>
                        <td><strong>{{ sirket.isim }}</strong></td>
                        <td>
                            {% if sirket.aktif %}
                            <span class="badge bg-success">Aktif</span>
                            {% else %}
                            <span class="badge bg-secondary">Pasif</span>
                            {% endif %}
                        </td>
                        <td>{{ sirket.kredi or 0 }}</td>
                        <td>{{ sirket.candidates|length if sirket.candidates else 0 }}</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">Şirket bulunmuyor.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <!-- Quick Actions -->
    <div class="card">
        <h5><span class="material-symbols-outlined">bolt</span> Hızlı İşlemler</h5>
        <div class="actions-grid">
            <a href="{{ url_for('admin.sirketler') }}" class="action-btn">
                <span class="material-symbols-outlined">apartment</span>
                Şirket Yönetimi
            </a>
            <a href="{{ url_for('admin.kullanicilar') }}" class="action-btn">
                <span class="material-symbols-outlined">people</span>
                Kullanıcılar
            </a>
            <a href="{{ url_for('admin.sorular') }}" class="action-btn">
                <span class="material-symbols-outlined">quiz</span>
                Soru Bankası
            </a>
            <a href="{{ url_for('admin.admin_logs') }}" class="action-btn">
                <span class="material-symbols-outlined">history</span>
                Aktivite Logları
            </a>
        </div>
    </div>
</div>
<style>
    .page-container {
        padding: 20px;
        max-width: 1400px;
        margin: 0 auto;
    }
    .page-header {
        margin-bottom: 20px;
    }
    .page-header h4 {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0;
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }
    .stat-card {
        background: white;
        border-radius: 16px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .stat-card.purple {
        border-left: 4px solid #8E2DE2;
    }
    .stat-card.blue {
        border-left: 4px solid #667eea;
    }
    .stat-card.green {
        border-left: 4px solid #28a745;
    }
    .stat-card.orange {
        border-left: 4px solid #f5af19;
    }
    .stat-card.cyan {
        border-left: 4px solid #00c6fb;
    }
    .stat-card .material-symbols-outlined {
        font-size: 36px;
        color: #666;
    }
    .stat-card h3 {
        margin: 0;
        font-size: 1.8rem;
    }
    .stat-card p {
        margin: 0;
        color: #666;
        font-size: 0.9rem;
    }
    .card {
        background: white;
        border-radius: 16px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    .card h5 {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
    }
    .action-btn {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 15px 20px;
        background: #f8f9fa;
        border-radius: 10px;
        text-decoration: none;
        color: #333;
        transition: all 0.2s;
    }
    .action-btn:hover {
        background: #667eea;
        color: white;
    }
    .action-btn .material-symbols-outlined {
        font-size: 24px;
    }
</style>
{% endblock %}
